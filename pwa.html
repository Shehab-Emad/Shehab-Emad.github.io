<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PWA</title>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core@4.7.4/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core@4.7.4/dist/ionic/ionic.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core@4.7.4/css/ionic.bundle.css" />
  <style>
    :root {
      --ion-safe-area-top: 20px;
      --ion-safe-area-bottom: 22px;
      --ion-grid-column-padding: 0px;
    }

    ion-fab-button,
    ion-toolbar {
      --background: #f04141;
      --color: #ffffff;
    }

    .sh_margin {
      margin: 50px;
    }
  </style>
</head>

<body>
  <ion-app>
    <!-- <ion-grid> -->
    <ion-row>
      <ion-col>
        <ion-toolbar>
          <ion-title>PWA App</ion-title>
        </ion-toolbar>
      </ion-col>
    </ion-row>
    <ion-row style="height: 100%">
      <ion-col>
        <ion-tabs>
          <ion-tab-bar slot="top" color="danger">
            <ion-tab-button tab="tab-home">
              <ion-icon name="home"></ion-icon>
              <ion-label>WhoAmI</ion-label>
            </ion-tab-button>

            <!-- <ion-tab-button tab="tab-about">
              <ion-icon name="information-circle"></ion-icon>
              <ion-label>WhoAmI</ion-label>
            </ion-tab-button> -->

            <ion-tab-button tab="tab-blog">
              <ion-icon name="book"></ion-icon>
              <ion-label>Blogs</ion-label>
              <ion-badge>7</ion-badge>
            </ion-tab-button>

            <ion-tab-button tab="tab-contact">
              <ion-icon name="contacts"></ion-icon>
              <ion-label>Contact</ion-label>
            </ion-tab-button>
          </ion-tab-bar>
          <ion-tab tab="tab-home">
            <ion-nav>


              <ion-content padding>
                <!-- <h1>SHEHAB EMAD</h1> -->
                <h3>Web Developer</h3>
                <p>Graduated from Mechatronics Engineering.
                  I enjoy meeting new people and learning new stuff everyday.
                  Also I got attached to programming specially building websites and making web applications.
                  As I am looking forward to learn more about web technologies.</p>
                <!-- Item as an Anchor -->
                <ion-item href="mailto://shehabemad1713@gmail.com">
                  <ion-label>
                    Mail me
                  </ion-label>
                  <ion-icon slot="end" name="mail"></ion-icon>
                </ion-item>
                <ion-item href=tel:01225359582">
                  <ion-label>
                    Call me
                  </ion-label>
                  <ion-icon slot="end" name="call"></ion-icon>
                </ion-item>
              </ion-content>
            </ion-nav>
          </ion-tab>

          <ion-tab tab="tab-about">
            <ion-nav>

              <ion-content padding>
                <!-- <ion-avatar>
              <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
            </ion-avatar> -->

                <ion-toolbar>
                  <ion-title>Default Title</ion-title>
                </ion-toolbar>
              </ion-content>
            </ion-nav>
          </ion-tab>

          <ion-tab tab="tab-blog">
            <ion-nav>


              <ion-content padding>

                <ion-card>
                  <ion-card-header>
                    <ion-card-subtitle>Coming Soon</ion-card-subtitle>
                    <ion-card-title>Coming Soon</ion-card-title>
                  </ion-card-header>

                  <ion-card-content>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                  </ion-card-content>
                </ion-card>
              </ion-content>

            </ion-nav>
          </ion-tab>

          <ion-tab tab="tab-contact">
            <ion-nav>

              <ion-content padding>
                <ion-list lines="full" class="ion-no-margin ion-no-padding">
                  <ion-item>
                    <ion-label position="stacked">First Name <ion-text color="danger">*</ion-text>
                    </ion-label>
                    <ion-input id="firstName" required type="text"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="stacked">Last Name <ion-text color="danger">*</ion-text>
                    </ion-label>
                    <ion-input id="lastName" required type="text"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="stacked">Email
                    </ion-label>
                    <ion-input id="email" type="email"></ion-input>
                  </ion-item>

                  <ion-item>
                    <ion-label position="stacked">Message <ion-text color="danger">*</ion-text>
                    </ion-label>
                    <ion-textarea id="message"></ion-textarea>
                  </ion-item>
                </ion-list>

                <div class="ion-padding sh_margin">
                  <ion-button expand="block" type="submit" class="ion-no-margin" onclick="sendMessage()">
                    Send
                  </ion-button>
                </div>
              </ion-content>
            </ion-nav>
          </ion-tab>

        </ion-tabs>
      </ion-col>
    </ion-row>
    <!-- fab placed to the bottom end -->
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button>
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
      <ion-fab-list side="start">
        <ion-fab-button href="http://fastinfo.000webhostapp.com/" target="_blank">
          <ion-icon name="create"></ion-icon>
        </ion-fab-button>
        <ion-fab-button href="https://github.com/Shehab-Emad" target="_blank">
          <ion-icon name="logo-github"></ion-icon>
        </ion-fab-button>
        <ion-fab-button href="https://www.facebook.com/shehab.emad.1884" target="_blank">
          <ion-icon name="logo-facebook"></ion-icon>
        </ion-fab-button>
        <ion-fab-button href="https://eg.linkedin.com/in/shehab-emad-63227512b" target="_blank">
          <ion-icon name="logo-linkedin"></ion-icon>
        </ion-fab-button>
        <ion-fab-button href="https://shehabemad.000webhostapp.com/" target="_blank">
          <ion-icon name="globe"></ion-icon>
        </ion-fab-button>
      </ion-fab-list>
    </ion-fab>
    <!-- </ion-grid> -->
  </ion-app>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-database.js"></script>


  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyDrPVNpNIqDzlaXlphI00cNaRp22BthCJU",
      authDomain: "pwa-app-c1440.firebaseapp.com",
      databaseURL: "https://pwa-app-c1440.firebaseio.com",
      projectId: "pwa-app-c1440",
      storageBucket: "pwa-app-c1440.appspot.com",
      // messagingSenderId: "363015393102",
      // appId: "1:363015393102:web:8814bc62582613294c981f"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    // Get a reference to the database service
    var database = firebase.database();
  </script>

  <script>
    function sendMessage() {
      firstName = document.querySelector("#firstName").value;
      lastName = document.querySelector("#lastName").value;
      email = document.querySelector("#email").value;
      message = document.querySelector("#message").value;
      // Get current date
      var today = new Date();
      var dd = String(today.getDate()).padStart(2, '0');
      var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
      var yyyy = today.getFullYear();
      today = mm + '/' + dd + '/' + yyyy;

      writeMessageData(firstName, lastName, email, message, today)
    }

    // Set data in Firebase database
    function writeMessageData(firstName, lastName, email, message, today) {

      // Write to Firebase database and return promise
      database.ref('/msg/'+Math.floor(Math.random() * 10000000000)).set({
        first_name: firstName,
        last_name: lastName,
        email: message,
        message: message,
        date: today
      }).then(function () {
        // console.log('Synchronization succeeded');
        document.querySelector("#firstName").value = "";
        document.querySelector("#lastName").value = "";
        document.querySelector("#email").value = "";
        document.querySelector("#message").value = "";
        presentToast("Thank you for messaging me")


      })
        .catch(function (error) {
          // console.log('Synchronization failed');
          presentToast("Try again")
        });
    }

    async function presentToast(toastText) {
      const toast = document.createElement('ion-toast');
      toast.message = toastText;
      toast.duration = 2000;
      document.body.appendChild(toast);
      return toast.present();
    }
  </script>
</body>

</html>